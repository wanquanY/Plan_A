<h1 class="manual-title">欢迎使用FreeWrite!</h1>

<div class="manual-section">
  <h2>快速上手指南</h2>

  <p>FreeWrite是一个简洁高效的笔记和写作应用。这个快速指南将帮助您了解如何使用我们的平台，充分发挥它的功能。</p>
</div>

<div class="manual-section">
  <h3>基本功能</h3>

  <div class="feature-card">
    <h4>1. 创建笔记</h4>
    <p>点击侧边栏上的"<strong>新建笔记</strong>"按钮，即可创建一个新的笔记文档。每个新笔记将自动保存，您可以随时编辑。</p>
  </div>

  <div class="feature-card">
    <h4>2. 编辑笔记</h4>
    <p>我们的编辑器支持富文本格式，让您可以：</p>
    <ul>
      <li>使用加粗、斜体、下划线等基本格式</li>
      <li>创建有序和无序列表</li>
      <li>插入标题和分隔线</li>
      <li>添加代码块</li>
    </ul>
  </div>

  <div class="feature-card">
    <h4>3. 管理笔记</h4>
    <p>在侧边栏的"<strong>我的笔记</strong>"部分，您可以：</p>
    <ul>
      <li>查看所有笔记</li>
      <li>重命名笔记（点击笔记右侧的编辑图标）</li>
      <li>删除不需要的笔记（点击笔记右侧的删除图标）</li>
    </ul>
  </div>
</div>

<div class="manual-section">
  <h3>高级功能</h3>

  <div class="feature-card">
    <h4>1. AI助手（Agent）</h4>
    <p>FreeWrite集成了强大的AI助手功能，可以帮助您完成各种任务：</p>
    <ul>
      <li><strong>如何调用AI助手</strong>：在编辑器中输入"@"符号，系统会自动弹出AI助手选择菜单</li>
      <li><strong>选择合适的助手</strong>：您可以从列表中选择最适合当前任务的AI助手</li>
      <li><strong>输入提示词</strong>：选择助手后，输入您的问题或指令，按Enter键发送</li>
      <li><strong>实时响应</strong>：AI助手会直接在编辑器中生成回复，您可以继续编辑或与AI交互</li>
    </ul>

    <p>我们提供了多种专业化的AI助手，包括：</p>
    <ul>
      <li>创作助手 - 帮助您撰写各类文章和内容</li>
      <li>文案助手 - 专注于生成各类营销文案</li>
      <li>其他公开的助手 - 可以在"AI助手管理"页面浏览更多</li>
    </ul>
  </div>

  <div class="feature-card">
    <h4>2. 自动保存</h4>
    <p>您的所有编辑内容都会自动保存，无需担心数据丢失。</p>
  </div>

  <div class="feature-card">
    <h4>3. 安全与隐私</h4>
    <p>您的所有笔记默认都是私密的，只有您可以查看。</p>
  </div>
</div>

<div class="manual-section">
  <h3>特色图表和代码功能</h3>

  <div class="feature-card">
    <h4>1. 代码块</h4>
    <p>您可以在编辑器中插入格式化的代码块，支持多种编程语言的语法高亮：</p>
    
    <div class="example-block">
      <p><strong>示例:</strong> Python代码块</p>
      <pre><code class="language-python">
def hello_world():
    print("欢迎使用FreeWrite!")
    
    # 这是一个简单的Python函数
    for i in range(3):
        print(f"第{i+1}次问候")
        
hello_world()
      </code></pre>
    </div>
    
    <p><strong>使用方法:</strong> 在编辑器中输入三个反引号(```)后跟语言名称，然后按Enter</p>
  </div>

  <div class="feature-card">
    <h4>2. Mermaid流程图</h4>
    <p>FreeWrite支持使用Mermaid语法创建各种图表，如流程图、时序图、甘特图等：</p>
    
    <div class="example-block">
      <p><strong>示例:</strong> 简单流程图</p>
      
      <div class="mermaid-container">
        <div class="mermaid" data-original-content="flowchart TD
    A[开始使用] --> B{是否有账号?}
    B -->|是| C[登录]
    B -->|否| D[注册]
    C --> E[创建笔记]
    D --> E
    E --> F[编辑内容]
    F --> G{需要AI帮助?}
    G -->|是| H[调用AI助手]
    G -->|否| I[继续编辑]
    H --> I
    I --> J[保存笔记]">
flowchart TD
    A[开始使用] --> B{是否有账号?}
    B -->|是| C[登录]
    B -->|否| D[注册]
    C --> E[创建笔记]
    D --> E
    E --> F[编辑内容]
    F --> G{需要AI帮助?}
    G -->|是| H[调用AI助手]
    G -->|否| I[继续编辑]
    H --> I
    I --> J[保存笔记]
        </div>
        <button class="copy-button">复制</button>
      </div>
      
      <p><strong>使用方法:</strong> 在编辑器中输入 "```mermaid" 然后按Enter，输入Mermaid语法的图表代码</p>
    </div>
  </div>

  <div class="feature-card">
    <h4>3. Markmap思维导图</h4>
    <p>通过Markmap，您可以创建交互式的思维导图，帮助组织和可视化您的想法：</p>
    
    <div class="example-block">
      <p><strong>示例:</strong> 思维导图</p>
        <div class="markmap-content processed-markmap no-rerender" data-content="%23%20FreeWrite%E5%8A%9F%E8%83%BD%0A%23%23%20%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%0A%23%23%23%20%E5%88%9B%E5%BB%BA%E7%AC%94%E8%AE%B0%0A%23%23%23%20%E7%BC%96%E8%BE%91%E7%AC%94%E8%AE%B0%0A%23%23%23%20%E7%AE%A1%E7%90%86%E7%AC%94%E8%AE%B0%0A%23%23%20%E9%AB%98%E7%BA%A7%E5%8A%9F%E8%83%BD%0A%23%23%23%20AI%E5%8A%A9%E6%89%8B%0A%23%23%23%23%20%E5%88%9B%E4%BD%9C%E5%8A%A9%E6%89%8B%0A%23%23%23%23%20%E6%96%87%E6%A1%88%E5%8A%A9%E6%89%8B%0A%23%23%23%20%E8%87%AA%E5%8A%A8%E4%BF%9D%E5%AD%98%0A%23%23%23%20%E5%AE%89%E5%85%A8%E4%B8%8E%E9%9A%90%E7%A7%81%0A%23%23%20%E5%9B%BE%E8%A1%A8%E5%8A%9F%E8%83%BD%0A%23%23%23%20%E4%BB%A3%E7%A0%81%E5%9D%97%0A%23%23%23%20Mermaid%E6%B5%81%E7%A8%8B%E5%9B%BE%0A%23%23%23%20Markmap%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE"></div>
        <div class="markmap-placeholder" style="text-align: center; padding: 50px 0; color: #999;">
          思维导图将在此处显示
        </div>
      <p><strong>使用方法:</strong> 在编辑器中输入 "```markmap" 然后按Enter，使用Markdown标题语法创建层级结构</p>
    </div>
  </div>
</div>

<div class="manual-section">
  <h3>小贴士</h3>

  <div class="tips-container">
    <div class="tip-card">
      <p><strong>定期整理</strong>：定期整理您的笔记，删除不需要的内容，保持工作区整洁。</p>
    </div>
    
    <div class="tip-card">
      <p><strong>使用标题</strong>：给笔记添加清晰的标题，方便日后查找。</p>
    </div>
    
    <div class="tip-card">
      <p><strong>使用格式</strong>：合理使用文本格式，使笔记内容更加清晰。</p>
    </div>
    
    <div class="tip-card">
      <p><strong>善用AI助手</strong>：当遇到写作瓶颈时，使用"@"调用AI助手寻求帮助。</p>
    </div>
    
    <div class="tip-card">
      <p><strong>长篇内容分段</strong>：对于复杂任务，可以分多次向AI助手提问，逐步完善您的内容。</p>
    </div>
    
    <div class="tip-card">
      <p><strong>使用图表</strong>：对于复杂概念，尝试使用流程图或思维导图来可视化展示。</p>
    </div>
  </div>
</div>

<div class="manual-section">
  <h3>快捷键参考</h3>
  
  <table class="shortcuts-table">
    <thead>
      <tr>
        <th>快捷键</th>
        <th>功能</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><kbd>Ctrl</kbd> + <kbd>B</kbd></td>
        <td>加粗文本</td>
      </tr>
      <tr>
        <td><kbd>Ctrl</kbd> + <kbd>I</kbd></td>
        <td>斜体文本</td>
      </tr>
      <tr>
        <td><kbd>Ctrl</kbd> + <kbd>U</kbd></td>
        <td>下划线文本</td>
      </tr>
      <tr>
        <td><kbd>Ctrl</kbd> + <kbd>Z</kbd></td>
        <td>撤销操作</td>
      </tr>
      <tr>
        <td><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>Z</kbd></td>
        <td>重做操作</td>
      </tr>
      <tr>
        <td><kbd>@</kbd></td>
        <td>调出AI助手选择器</td>
      </tr>
      <tr>
        <td><kbd>```</kbd> + 语言名 + <kbd>Enter</kbd></td>
        <td>插入代码块</td>
      </tr>
    </tbody>
  </table>
</div>

<div class="manual-section">
  <h3>帮助与支持</h3>
  <p>如果您有任何问题或需要帮助，请联系我们的支持团队。</p>
</div>

<div class="manual-footer">
  <p>祝您使用愉快！</p>
</div>

<style>
  /* 这些样式将直接应用于手册内容 */
  .manual-title {
    color: #007bff;
    text-align: center;
    margin-bottom: 30px;
    font-size: 2rem;
  }
  
  .manual-section {
    margin-bottom: 30px;
  }
  
  .feature-card {
    padding: 15px;
    margin-bottom: 20px;
    border-left: 3px solid #007bff;
    background-color: #f8f9fa;
    border-radius: 0 5px 5px 0;
  }
  
  .example-block {
    padding: 15px;
    margin: 15px 0;
    background-color: #f0f0f0;
    border-radius: 5px;
  }
  
  .example-block pre {
    background-color: #2d2d2d;
    color: #f8f8f2;
    padding: 15px;
    border-radius: 5px;
    overflow-x: auto;
  }
  
  /* 新增的代码示例样式 */
  .code-example {
    background-color: #2d2d2d;
    color: #f8f8f2;
    padding: 15px;
    border-radius: 5px;
    overflow-x: auto;
    margin: 15px 0;
    font-family: monospace;
    white-space: pre;
  }
  
  /* Mermaid容器样式 */
  .mermaid-container {
    margin: 0.6em 0;
    position: relative;
    background-color: #f6f8fa;
    border-radius: 6px;
    padding: 15px;
    overflow: auto;
    border: 1px solid #ddd;
  }
  
  .mermaid {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    text-align: center;
    min-height: 200px;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* 复制按钮样式 */
  .copy-button {
    position: absolute;
    top: 5px;
    right: 5px;
    background-color: rgba(255, 255, 255, 0.8);
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 2px 8px;
    font-size: 12px;
    cursor: pointer;
    color: #666;
  }
  
  .copy-button:hover {
    background-color: #e6f7ff;
    color: #1890ff;
  }
  
  /* Markmap容器样式 */
  .markmap-container {
    margin: 0.6em 0;
    position: relative;
    background-color: #f6f8fa;
    border-radius: 6px;
    padding: 15px;
    overflow: auto;
    border: 1px solid #ddd;
  }
  
  .markmap-component-wrapper {
    margin: 20px 0;
    padding: 10px;
    background-color: #fafafa;
    border: 1px solid #eaeaea;
    border-radius: 6px;
    min-height: 300px;
    position: relative;
  }
  
  .markmap-preview, .markmap-preview {
    border: 1px dashed #999;
    padding: 15px;
    text-align: center;
    margin-top: 10px;
    background-color: #fff;
  }

  /* 确保Mermaid和Markmap容器有足够高度 */
  .mermaid {
    min-height: 300px;
    width: 100%;
  }
  
  .markmap {
    min-height: 300px;
    width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }
  
  .tips-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 15px;
  }
  
  .tip-card {
    padding: 15px;
    background-color: #fffaf0;
    border-left: 3px solid #ffc107;
    border-radius: 0 5px 5px 0;
  }
  
  .shortcuts-table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
  }
  
  .shortcuts-table th, .shortcuts-table td {
    padding: 10px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }
  
  .shortcuts-table th {
    background-color: #f0f0f0;
  }
  
  kbd {
    display: inline-block;
    padding: 2px 6px;
    font-family: monospace;
    background-color: #f7f7f7;
    border: 1px solid #ccc;
    border-radius: 3px;
    box-shadow: 0 1px 1px rgba(0,0,0,0.2);
    font-size: 0.9em;
  }
  
  .manual-footer {
    text-align: center;
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid #ddd;
    font-style: italic;
  }
</style>

<!-- 添加Mermaid和Markmap渲染所需的脚本 -->
<script>
// 这个标记告诉文本编辑器，这段HTML包含需要渲染的mermaid和markmap代码
// 编辑器会自动处理这些特殊标记的内容
document.addEventListener('DOMContentLoaded', function() {
  // 确保只渲染一次
  if (window.userManualRendered) return;
  window.userManualRendered = true;
  
  // 在原始渲染器执行前，保护不需要重新渲染的元素
  const noRerenderElements = document.querySelectorAll('.no-rerender');
  noRerenderElements.forEach(el => {
    // 添加特殊的属性，使渲染器知道跳过这些元素
    el.setAttribute('data-markmap-skip-render', 'true');
    
    // 防止被clearAttribute清除属性的代码影响
    const originalRemoveAttribute = el.removeAttribute;
    el.removeAttribute = function(name) {
      if (name === 'data-markmap-processed' || name === 'data-markmap-skip-render' || name === 'data-rendered') {
        console.log('防止移除保护属性:', name);
        return;
      }
      return originalRemoveAttribute.call(this, name);
    };
  });
  
  // 标记所有预处理过的元素，防止重复渲染
  document.querySelectorAll('.markmap-initialized').forEach(el => {
    el.setAttribute('data-rendered', 'true');
  });
  
  // FreeWrite编辑器会处理这些标记
  // mermaid-auto-render
  // markmap-auto-render
  
  // 通过自定义事件通知系统不要再次渲染这些元素
  document.dispatchEvent(new CustomEvent('markmap-render-protection-applied'));
});
</script> 